<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords"
        content="wrappixel, admin dashboard, html css dashboard, web dashboard, bootstrap 5 admin, bootstrap 5, css3 dashboard, bootstrap 5 dashboard, Monsterlite admin bootstrap 5 dashboard, frontend, responsive bootstrap 5 admin template, Monster admin lite design, Monster admin lite dashboard bootstrap 5 dashboard template">
    <meta name="description"
        content="Monster Lite is powerful and clean admin dashboard template, inpired from Bootstrap Framework">
    <meta name="robots" content="noindex,nofollow">
    <title>Smart Cosmetics suggestion System</title>
    <link rel="canonical" href="https://www.wrappixel.com/templates/monster-admin-lite/" />
    <!-- Favicon icon -->
    <link rel="icon" type="image/png" sizes="16x16" href="../static/assets/images/favicon.png">
    <!-- Custom CSS -->
    <link href="../static/css/style.min.css" rel="stylesheet">
    <script src="../static/js/jquery-3.3.1.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        .card-img-top {
            width: 336px;
            height: 224px;
            object-fit: cover;
            /* To maintain aspect ratio and fill the container */
        }
    </style>

</head>

<body>

    <div id="main-wrapper" data-layout="vertical" data-navbarbg="skin5" data-sidebartype="full"
        data-sidebar-position="absolute" data-header-position="absolute" data-boxed-layout="full">
        <!-- ============================================================== -->
        <!-- Topbar header - style you can find in pages.scss -->
        <!-- ============================================================== -->
        <header class="topbar" data-navbarbg="skin6">
            <nav class="navbar top-navbar navbar-expand-md navbar-dark">
                <div class="navbar-header" data-logobg="skin6">
                    <!-- ============================================================== -->
                    <!-- Logo -->
                    <!-- ============================================================== -->
                    <a class="navbar-brand" href="index.html">
                        <!-- Logo icon -->

                        <!--End Logo icon -->
                        <!-- Logo text -->

                        <img src="../static/assets/images/fff.png" alt="homepage" class="small-inline-image" />

                    </a>
                    <!-- ============================================================== -->
                    <!-- End Logo -->
                    <!-- ============================================================== -->
                    <!-- ============================================================== -->
                    <!-- toggle and nav items -->
                    <!-- ============================================================== -->
                    <a class="nav-toggler waves-effect waves-light text-dark d-block d-md-none"
                        href="javascript:void(0)"><i class="ti-menu ti-close"></i></a>
                </div>
                <!-- ============================================================== -->
                <!-- End Logo -->
                <!-- ============================================================== -->
                <div class="navbar-collapse collapse" id="navbarSupportedContent" data-navbarbg="skin5">

                    <!-- ============================================================== -->
                    <!-- toggle and nav items -->
                    <!-- ============================================================== -->
                    <ul class="navbar-nav me-auto mt-md-0 ">
                        <!-- ============================================================== -->
                        <!-- Search -->
                        <!-- ============================================================== -->


                    </ul>

                    <!-- ============================================================== -->
                    <!-- Right side toggle and nav items -->
                    <!-- ============================================================== -->
                    <ul class="navbar-nav">
                        <!-- ============================================================== -->
                        <!-- User profile and search -->
                        <!-- ============================================================== -->
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle waves-effect waves-dark" href="#" id="navbarDropdown"
                                role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <img src="../{{img}}" alt="user" class="profile-pic me-2">{{username}}
                            </a>
                            <ul class="dropdown-menu show" aria-labelledby="navbarDropdown"></ul>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>
        <!-- ============================================================== -->
        <!-- End Topbar header -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Left Sidebar - style you can find in sidebar.scss  -->
        <!-- ============================================================== -->
        <aside class="left-sidebar" data-sidebarbg="skin6">
            <!-- Sidebar scroll-->
            <div class="scroll-sidebar">
                <!-- Sidebar navigation-->
                <nav class="sidebar-nav">
                    <ul id="sidebarnav">
                        <!-- User Profile-->
                        <li class="sidebar-item"> <a class="sidebar-link waves-effect waves-dark sidebar-link"
                                href="/index" aria-expanded="false"><i class="me-3 far fa-clock fa-fw"
                                    aria-hidden="true"></i><span class="hide-menu">Dashboard</span></a></li>
                        <li class="sidebar-item"> <a class="sidebar-link waves-effect waves-dark sidebar-link"
                                href="/profile" aria-expanded="false">
                                <i class="me-3 fa fa-user" aria-hidden="true"></i><span
                                    class="hide-menu">Profile</span></a>
                        </li>
                        <li class="sidebar-item"> <a class="sidebar-link waves-effect waves-dark sidebar-link"
                                href="/tablebasic" aria-expanded="false"><i class="me-3 fa fa-table"
                                    aria-hidden="true"></i><span class="hide-menu">Service</span></a></li>

                        <li class="text-center p-20 upgrade-btn">
                            <a href="/logout" class="btn btn-danger text-white mt-2">Logout</a>
                        </li>
                    </ul>

                </nav>
                <!-- End Sidebar navigation -->
            </div>
            <!-- End Sidebar scroll-->
        </aside>
        <!-- ============================================================== -->
        <!-- End Left Sidebar - style you can find in sidebar.scss  -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Page wrapper  -->
        <!-- ============================================================== -->
        <div class="page-wrapper">
            <!-- ============================================================== -->
            <!-- Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <div class="page-breadcrumb">
                <div class="row align-items-center">
                    <div class="col-md-6 col-8 align-self-center">
                        <h3 class="page-title mb-0 p-0">Smart Cosmetics suggestion System based on Skin Condition</h3>

                    </div>

                </div>
            </div>
            <!-- ============================================================== -->
            <!-- End Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- Container fluid  -->
            <!-- ============================================================== -->
            <div class="container-fluid">
                <!-- ============================================================== -->
                <!-- Start Page Content -->
                <!-- ============================================================== -->
                <div class="row">
                    <!-- column -->
                    <div class="col-sm-12">
                        <div class="card">
                            <div class="card-body">
                                <h4 class="card-title">UPLOAD SKIN IMAGE </h4>
                                <form id="uploadForm">
                                    <div class="mb-3">
                                        <div class="mb-2 w-100">
                                            <label class="text-muted" for="file">PRODUCT IMAGE</label>
                                        </div>
                                        <input id="file" type="file" class="form-control" name="file" required>
                                    </div>

                                    <div class="d-flex align-items-center">
                                        <button id="btnSubmit" class="btn btn-primary ms-auto">
                                            SUBMIT
                                        </button>
                                    </div>
                                </form>


                            </div>
                        </div>
                    </div>
                </div>



                <!-- ============================================================== -->
                <div class="row" id="responseDiv" style="display: none;">
                    <!-- column -->
                    <div class="col-sm-12">
                        <div class="card">
                            <div class="card-body">
                                <h4 class="card-title">Cosmetics suggestion System based on Skin Condition </h4>


                                <div class="row justify-content-center">
                                    <!-- Column -->

                                    <div class="col-lg-4 col-md-6">
                                        <div class="card">
                                            <img class="card-img-top img-responsive"
                                                src="../static/assets/images/big/img4.jpg" alt="Card">
                                            <div class="card-body">
                                                <ul class="list-inline d-flex align-items-center">
                                                    <li class="ps-0">20 May 2021</li>
                                                    <li class="ms-auto"><a href="javascript:void(0)" class="link">3
                                                            Comment</a></li>
                                                </ul>
                                                <h3 class="font-normal">Featured Hydroflora Pots Garden &amp; Outdoors
                                                </h3>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Column -->


                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <!-- ============================================================== -->
                <!-- ============================================================== -->
                <!-- Right sidebar -->
                <!-- ============================================================== -->
                <!-- .right-sidebar -->
                <!-- ============================================================== -->
                <!-- End Right sidebar -->
                <!-- ============================================================== -->
            </div>
            <!-- ============================================================== -->
            <!-- End Container fluid  -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- footer -->
            <!-- ============================================================== -->
            <footer class="footer text-center">
                © 2023 Monster Admin by <a href="/">Smart Cosmetics suggestion System based on Skin Condition</a>
            </footer>
            <!-- ============================================================== -->
            <!-- End footer -->
            <!-- ============================================================== -->
        </div>
        <!-- ============================================================== -->
        <!-- End Page wrapper  -->
        <!-- ============================================================== -->
    </div>
    <!-- ============================================================== -->
    <!-- End Wrapper -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <script>
        $(document).ready(function () {
            $("#btnSubmit").click(function (e) {
                e.preventDefault();

                // Get the form data
                var formData = new FormData($("form")[0]);

                // Submit the form using AJAX
                $.ajax({
                    url: "/upload",
                    type: "POST",
                    data: formData,
                    contentType: false,
                    processData: false,
                    success: function (data) {
                        // Display the backend response in the responseDiv

                        try {
                            // Parse the JSON data
                            var jsonData = JSON.parse(data);

                            // Access the separate parts
                            var row = jsonData[0];
                            var message = jsonData[1];
                            var path = jsonData[2];


                            // Log or do something with the separate parts
                            console.log("Row:", row);
                            console.log("Message:", message);


                            Swal.fire({
                                imageUrl: path,
                                imageWidth: 300,  // Set the desired width of the image
                                title: "RECOMMENDED PRODUCTS",
                                text: message,
                                confirmButtonText: 'Okay'

                            }).then((result) => {
                                // Check if the "Okay" button was clicked
                                if (result.isConfirmed) {
                                    // Display the backend response in the responseDiv
                                    displayJsonData(row);

                                    // Replace with the desired URL
                                }
                            });





                        } catch (parseError) {
                            console.error("Error parsing JSON response:", parseError);
                        }


                    },
                    error: function (error) {
                        console.error("Error submitting form:", error);
                    }
                });
            });


            function displayJsonData(row) {
                // Clear existing content
                $("#responseDiv").html("");

                // Loop through the JSON array
                for (var i = 0; i < row.length; i++) {
                    var item = row[i][0];
                    console.log('-----------------------item-----------------------')
                    console.log(item)
                    var imageUrl = item[6]; 
                    console.log('-----------------------item-----------------------')
                    console.log(imageUrl) 
                    var title = item[1];
                    var price = item[2];
                    var PCS1 = item[5];      // Change this index based on the actual structure of your data

                    // Dynamically create and append card elements
                    var cardHtml = '<div class="col-lg-4 col-md-6">' +
                        '<div class="card">' +
                        '<img class="card-img-top img-responsive" src="' + imageUrl + '" alt="Card">' +
                        '<div class="card-body">' +
                        '<ul class="list-inline d-flex align-items-center">' +
                        '<li class="ps-0">' + price + '</li>' +
                        '<li class="ms-auto"><a href="javascript:void(0)" class="link">PCS' + ' ' + PCS1 + '</a></li>' +
                        '</ul>' +
                        '<h3 class="font-normal">' + title + '</h3>' +
                        '</div>' +
                        '</div>' +
                        '</div>';

                    // Append the cardHtml to the responseDiv
                    $("#responseDiv").append(cardHtml);
                }

                // Display the responseDiv
                $("#responseDiv").show();
            }






        });
    </script>

    <!-- ============================================================== -->

    <!-- Bootstrap tether Core JavaScript -->

    <script src="../static/js/app-style-switcher.js"></script>
    <!--Wave Effects -->
    <script src="../static/js/waves.js"></script>
    <!--Menu sidebar -->
    <script src="../static/js/sidebarmenu.js"></script>
    <!--Custom JavaScript -->
    <script src="../static/js/custom.js"></script>
</body>

</html>